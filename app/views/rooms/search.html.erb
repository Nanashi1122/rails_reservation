<h1>施設検索</h1>
<p>検索結果: <%= @rooms.count %> 件見つかりました</p>
<%= form_with(url: search_rooms_path, method: 'get') do |form| %>
  <%= form.hidden_field :address, value: @default_query %>
  
  <%= form.label :address, '　　　　住所検索:' %>
  <%= form.text_field :address %><br>

  <%= form.label :query, 'フリーワード検索:' %>
  <%= form.text_field :query %>

  <%= form.submit 'Search' %>
<% end %>

<table>
    <thead>
        <tr>
        <th>名前</th>
        <th>紹介</th>
        <th>宿泊料金(/日)</th>
        <th>住所</th>
        <th>施設画像</th>
        <th></th>
        </tr>
    </thead>

    <tbody>
        <% @rooms.each do |room| %>
        <tr>
            <td><%= room.name %></td>
            <td><%= room.introduction %></td>
            <td><%= room.fee %></td>
            <td><%= room.address %></td>
            <% if room.room_image.attached? %>
                <td><%= image_tag room.room_image, size: '500x300' %></td>
            <% else %>
                <td><%= image_tag 'default-room.png', size: '500x300' %></td>
            <% end%>
            <td><%= button_to "詳細・予約はこちら", {action: "show"}, {method: :get, params: {id: room.id}} %></td>
        </tr>
        <% end %>
    </tbody>
</table>